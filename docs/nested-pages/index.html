<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Remake is a web app framework that makes it possible to ship a product faster than ever.">
    <title>Nested Pages - Remake Docs</title>
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,600,700" rel="stylesheet">
    <link rel="stylesheet" href="/static/normalize-min.css?v=901">
    <link rel="stylesheet" href="/static/prism.css?v=901">
    <link rel="stylesheet" href="/static/slideout.css?v=901">
    <link rel="stylesheet" href="/static/style.css?v=901">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <!-- favicon: -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=901">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=901">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=901">
    <link rel="manifest" href="/site.webmanifest?v=901">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=901" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="Remake">
    <meta name="application-name" content="Remake">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <!-- OG meta tags -->
    
    <meta name="og:title" content="Nested Pages - Remake Docs">
    <meta name="og:site_name" content="Remake Documentation">
    <meta name="og:type" content="website">
      <meta property="og:image" content="https://mugshotbot.com/m?theme=two_up&mode=dark&color=ff1765&pattern=none&image=25ab3aad&hide_watermark=true&url=https://docs.remaketheweb.com//nested-pages/">
      <meta property="twitter:card" content="summary_large_image">
  </head>
  <body>
    <div id="menu">
    </div>
    <div id="panel">
      <div class="page">
        <div class="sidebar hide-on-mobile">
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">INTRO</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/">What is Remake?</a>
              <a class="sidebar__list-item " href="/why-build-with-remake">Why Build With Remake</a>
              <a class="sidebar__list-item " href="/high-level-overview">High-level Overview</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">GETTING STARTED</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/install-and-setup">Install &amp; Setup</a>
              <a class="sidebar__list-item " href="/a-simple-example-app">A Simple Example App</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">TUTORIAL</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/introducing-remake">Introducing Remake</a>
              <a class="sidebar__list-item " href="/installing-and-setting-up-remake">Installing &amp; Setting Up Remake</a>
              <a class="sidebar__list-item " href="/attach-data-to-elements">Attach Data to Elements</a>
              <a class="sidebar__list-item " href="/rendering-data">Rendering Data</a>
              <a class="sidebar__list-item " href="/making-data-editable">Making Data Editable</a>
              <a class="sidebar__list-item " href="/adding-new-items">Adding New Items</a>
              <a class="sidebar__list-item " href="/sorting-lists-of-items">Sorting Lists of Items</a>
              <a class="sidebar__list-item " href="/deploy-a-remake-web-app">Deploy a Remake Web App</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">HOW REMAKE WORKS</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/command-line-tool">Command Line Tool</a>
              <a class="sidebar__list-item " href="/data">Data</a>
              <a class="sidebar__list-item " href="/saving">Saving</a>
              <a class="sidebar__list-item " href="/file-uploads">File Uploads</a>
              <a class="sidebar__list-item " href="/routing">Routing</a>
              <a class="sidebar__list-item sidebar__list-item--selected" href="/nested-pages">Nested Pages &amp; Routes</a>
              <a class="sidebar__list-item " href="/templating">Templating</a>
              <a class="sidebar__list-item " href="/visibility">Visibility (show-if)</a>
              <a class="sidebar__list-item " href="/sortable-items">Sortable items</a>
              <a class="sidebar__list-item " href="/user-accounts">User accounts</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">REMAKE'S ATTRIBUTES</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/saving-data-attributes">Saving data</a>
              <a class="sidebar__list-item " href="/updating-data-attributes">Updating data</a>
              <a class="sidebar__list-item " href="/reacting-to-data-attributes">Reacting to data</a>
              <a class="sidebar__list-item " href="/advanced-attributes">Advanced attributes</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">REMAKE CORE</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/remake-setup-and-callbacks">Setup and Callbacks</a>
              <a class="sidebar__list-item " href="/remake-methods">Remake Methods</a>
              <a class="sidebar__list-item " href="/remake-edit-popover">Remake Edit Popover</a>
              <a class="sidebar__list-item " href="/remake-upload-notice">Remake Upload Notice</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">ABOUT</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/why-remake">Why Remake</a>
              <a class="sidebar__list-item " href="/remake-tips">Remake Tips</a>
              <a class="sidebar__list-item " href="/contributors">Contributors</a>
            </div>
          </div>
          <div class="sidebar__list-container">
            <div class="sidebar__list-heading">TECHNICAL CONCEPTS</div>
            <div class="sidebar__list">
              <a class="sidebar__list-item " href="/flattening-the-stack">Flattening the stack</a>
              <a class="sidebar__list-item " href="/what-is-crud">What is a CRUD web app?</a>
            </div>
          </div>
        </div>
        <div class="main">
          <div class="search-docs">
            <label class="search-docs__label">
              <img class="search-docs__search-icon" src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDU2Ljk2NiA1Ni45NjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDU2Ljk2NiA1Ni45NjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPHBhdGggZD0iTTU1LjE0Niw1MS44ODdMNDEuNTg4LDM3Ljc4NmMzLjQ4Ni00LjE0NCw1LjM5Ni05LjM1OCw1LjM5Ni0xNC43ODZjMC0xMi42ODItMTAuMzE4LTIzLTIzLTIzcy0yMywxMC4zMTgtMjMsMjMgIHMxMC4zMTgsMjMsMjMsMjNjNC43NjEsMCw5LjI5OC0xLjQzNiwxMy4xNzctNC4xNjJsMTMuNjYxLDE0LjIwOGMwLjU3MSwwLjU5MywxLjMzOSwwLjkyLDIuMTYyLDAuOTIgIGMwLjc3OSwwLDEuNTE4LTAuMjk3LDIuMDc5LTAuODM3QzU2LjI1NSw1NC45ODIsNTYuMjkzLDUzLjA4LDU1LjE0Niw1MS44ODd6IE0yMy45ODQsNmM5LjM3NCwwLDE3LDcuNjI2LDE3LDE3cy03LjYyNiwxNy0xNywxNyAgcy0xNy03LjYyNi0xNy0xN1MxNC42MSw2LDIzLjk4NCw2eiIgZmlsbD0iIzAwMDAwMCIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K" />
              <input class="search-docs__input" placeholder="Search docs" type="text" >
            </label>
          </div>
          <h3>Nested Pages</h3>
<p>This guide will show you how to create nested pages in Remake!</p>
<p>First, we'll need to turn on unique ids! This will cause Remake to generate a unique id for every object in the database. Remake uses these ids to save data directly to certain objects.</p>
<p>Edit your <code>.remake</code> file and add this line to turn on unique ids:</p>
<pre><code class="language-html">&quot;generateUniqueIds&quot;: true
</code></pre>
<p>Now, every object in your users' data files will have a unique id automatically assigned to it!</p>
<pre><code class="language-json">{
  &quot;todolists&quot;: [
    {
      &quot;name&quot;: &quot;My first todo list&quot;,
      &quot;todos&quot;: [
        {
          &quot;text&quot;: &quot;My first todo&quot;
        },
        &quot;id&quot;: &quot;RQZA9&quot;
      ],
      &quot;id&quot;: &quot;JXBR4&quot;
    },
    {
      &quot;name&quot;: &quot;My second todo list&quot;,
      &quot;todos&quot;: [
        {
          &quot;text&quot;: &quot;Another todo&quot;
        },
        &quot;id&quot;: &quot;YYCT2&quot;
      ],
    &quot;id&quot;: &quot;LERW5&quot;
    }
  ],
  &quot;id&quot;: &quot;KOLP8&quot;
}
</code></pre>
<p><strong>Note:</strong> Remake only generates these ids on page load, so if you don't see them right away, try refreshing the page.</p>
<p>Now, you have everything you need to add nested pages!</p>
<p>Next, you need to render each object's unique id the right <code>object</code>  element in the HTML.</p>
<p>Do this using <code>key:id</code> attributes</p>
<pre><code class="language-html">&lt;div object&gt;
  &lt;div array key=&quot;todolists&quot;&gt;
    {{#for list in todolists}}
      &lt;div object key:name=&quot;@search&quot; key:id=&quot;{{list.id}}&quot;&gt;
        &lt;div target:name=&quot;@innerText&quot; edit:name&gt;{{list.name}}&lt;/div&gt;
        &lt;div array key=&quot;todos&quot;&gt;
          {{#for todo in list.todos}}
            &lt;div object key:text=&quot;@innerText&quot; edit:text key:id=&quot;{{todo.id}}&quot;&gt;{{todo.text}}&lt;/div&gt;
          {{/for}}
        &lt;/div&gt;
        &lt;button new:todo&gt;New todo&lt;/button&gt;
      &lt;/div&gt;
    {{/for}}
  &lt;/div&gt;
  &lt;button new:todolist&gt;New todo list&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<p>One problem: when a new item is created don't have ids, so use <code>generateIdIfNone</code> helper.</p>
<pre><code class="language-html">&lt;div object&gt;
  &lt;div array key=&quot;todolists&quot;&gt;
    {{#for list in todolists}}
      &lt;div object key:name=&quot;@search&quot; key:id=&quot;{{generateIdIfNone list.id 'list.id'}}&quot;&gt;
        &lt;div target:name=&quot;@innerText&quot; edit:name&gt;{{list.name}}&lt;/div&gt;
        &lt;div array key=&quot;todos&quot;&gt;
          {{#for todo in list.todos}}
            &lt;div object key:text=&quot;@innerText&quot; edit:text key:id=&quot;{{generateIdIfNone todo.id 'todo.id'}}&quot;&gt;{{todo.text}}&lt;/div&gt;
          {{/for}}
        &lt;/div&gt;
        &lt;button new:todo&gt;New todo&lt;/button&gt;
      &lt;/div&gt;
    {{/for}}
  &lt;/div&gt;
  &lt;button new:todolist&gt;New todo list&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<p>Adding <code>key:id</code> attributes to every object accomplishes a few things:</p>
<ol>
<li>If data is edited inside an element with a <code>key:id</code> attribute, Remake will save the data to an object with a matching id instead of saving the whole page.</li>
<li>When saving the page, Remake does its best to preserve data and not discard anything. However, it's hard to do this with items in an <code>array</code> element.</li>
<li>Usually, new unique ids for every object are generated on every page load. However, if you add them to the objects on the page in <code>key:id</code> attributes, they'll stay the same across page loads.</li>
</ol>
<p>Now we can link to items by using their unique ids:</p>
<pre><code class="language-html">&lt;div object&gt;
  &lt;div array key=&quot;todoLists&quot;&gt;
    {{#for todoList in todoLists}}
      &lt;a href=&quot;/{{currentUser.details.username}}/todolist/{{todoList.id}}&quot;&gt;{{todoList.name}}&lt;/a&gt;
    {{/for}}
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>With this type of url, Remake expects the first url param to be a user's username, the next to be the page template that will be rendered, and the final param (if there is one) to be the id of an object in the page author's data.</p>
<p>(Tip: <a href="/routing/">More valuable info about url params</a>)</p>
<p>Here's what our <code>todolist.hbs</code> template might look like:</p>
<pre><code class="language-html">&lt;div object key:text=&quot;@search&quot; key:id=&quot;{{currentItem.id}}&quot;&gt;
  &lt;div target:text=&quot;@innerText&quot;&gt;{{currentItem.name}}&lt;/div&gt;
  &lt;div array key=&quot;todos&quot;&gt;
    {{#for todo in currentItem.todos}}
      &lt;div object key:text=&quot;@innerText&quot; key:id=&quot;{{todo.id}}&quot;&gt;{{todo.text}}&lt;/div&gt;
    {{/for}}
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Here, the <code>currentItem</code> variable is given to us automatically. Remake gets the currentItem by looking through all the data belonging to the page author and finding the object that matches the id that's in the 3rd url param.</p>
<p><strong>So, here's what happens:</strong></p>
<ol>
<li>The user clicks on a link with this url path: <code>/johnsmith/todolist/LERW5</code>.</li>
<li>Remake looks through johnsmith's data and finds an object with the id <code>LERW5</code></li>
<li>Remake creates a special variable called <code>currentItem</code> to represent this object</li>
<li>Remake renders the <code>todolist.hbs</code> template using johnsmith's data</li>
</ol>
<hr>
<p>Just <em>one more note</em> before we finish!</p>
<p>By default, Remake will save a page's data to the current user's data — without thinking about where it should go.</p>
<p>That's why, on this nested page, it's important to have a <code>key:id</code> HTML attribute that's set to the id of the <code>currentItem</code>. This tells Remake: everything piece of data inside this element should be saved to this id.</p>
<p>Without this <code>key:id</code> attribute, Remake will save the data to the top-level of the user's data. With the attribute, it will find the object matching that id <em>first</em> and then save the data into it.</p>

          <div class="spacer--16"></div>
          <a class="github-link github-link--footer" href="https://github.com/remake/remake" target="_blank"><img src="/static/github.svg"> View on GitHub</a>
        </div>
      </div>
    </div>
    <a class="toggle-button" href="#">☰ Menu</a>
    <script src="/static/slideout.min.js?v=901"></script>
    <script src="/static/prism.js?v=901"></script>
    <script src="https://cdn.jsdelivr.net/npm/polite-email-popup@0.9.3/dist/polite-email-popup.umd.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script src="/static/main.js?v=901"></script>
    <script>// GOOGLE ANALYTICS
      (function(a,b,c){var d=a.history,e=document,f=navigator||{},g=localStorage,
      h=encodeURIComponent,i=d.pushState,k=function(){return Math.random().toString(36)},
      l=function(){return g.cid||(g.cid=k()),g.cid},m=function(r){var s=[];for(var t in r)
      r.hasOwnProperty(t)&&void 0!==r[t]&&s.push(h(t)+"="+h(r[t]));return s.join("&")},
      n=function(r,s,t,u,v,w,x){var z="https://www.google-analytics.com/collect",
      A=m({v:"1",ds:"web",aip:c.anonymizeIp?1:void 0,tid:b,cid:l(),t:r||"pageview",
      sd:c.colorDepth&&screen.colorDepth?screen.colorDepth+"-bits":void 0,dr:e.referrer||
      void 0,dt:e.title,dl:e.location.origin+e.location.pathname+e.location.search,ul:c.language?
      (f.language||"").toLowerCase():void 0,de:c.characterSet?e.characterSet:void 0,
      sr:c.screenSize?(a.screen||{}).width+"x"+(a.screen||{}).height:void 0,vp:c.screenSize&&
      a.visualViewport?(a.visualViewport||{}).width+"x"+(a.visualViewport||{}).height:void 0,
      ec:s||void 0,ea:t||void 0,el:u||void 0,ev:v||void 0,exd:w||void 0,exf:"undefined"!=typeof x&&
      !1==!!x?0:void 0});if(f.sendBeacon)f.sendBeacon(z,A);else{var y=new XMLHttpRequest;
      y.open("POST",z,!0),y.send(A)}};d.pushState=function(r){return"function"==typeof d.onpushstate&&
      d.onpushstate({state:r}),setTimeout(n,c.delay||10),i.apply(d,arguments)},n(),
      a.ma={trackEvent:function o(r,s,t,u){return n("event",r,s,t,u)},
      trackException:function q(r,s){return n("exception",null,null,null,null,r,s)}}})
      (window,"UA-154029000-3",{anonymizeIp:true,colorDepth:true,characterSet:true,screenSize:true,language:true});
    </script>
  </body>
</html>